<template>
  <div class="system-message-input-container">
    <div class="message-input-header">
      <div class="message-tools">
        <div class="smile-tool message-tool" :title="tips.systemMessageSmileTip">
          <svg t="1671009949433" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
               p-id="4695">
            <path d="M949.88112387 808.11842067L949.9556383 808.11842067 949.9556383 807.6700889Z" p-id="4696"></path>
            <path
                d="M870.35263082 153.64799056c-197.58863216-197.62340628-519.11414397-197.62340628-716.70277735 0-197.62340628 197.58739061-197.62340628 519.11414397 0 716.70153458 197.58863216 197.62464783 519.11538673 197.62464783 716.70277735 0C1067.97603589 672.76089298 1067.97603589 351.23538117 870.35263082 153.64799056M818.91873163 818.95164283c-169.23447691 169.23323536-444.63776048 169.19721969-613.85236663 0-169.25186458-169.26925104-169.25186458-444.61913125 0-613.88714075 169.21460614-169.21584891 444.61913125-169.25310612 613.85236663 0C988.15072544 374.27910823 988.15072544 649.71840748 818.91873163 818.95164283"
                p-id="4697"></path>
            <path
                d="M353.89369973 458.62623156c30.07793289 0 54.5573134-24.47813898 54.55731341-54.57345832 0-30.13257657-24.47938051-54.64673121-54.55731341-54.6467312-30.14996423 0-54.62934475 24.51415465-54.62934474 54.6467312C299.26435499 434.14809137 323.7437355 458.62623156 353.89369973 458.62623156"
                p-id="4698"></path>
            <path
                d="M668.17015566 458.71564937c30.1127058 0 54.62561891-24.53154111 54.6256189-54.6281032 0-30.13133502-24.5129131-54.60947399-54.6256189-54.609474-30.08041597 0-54.5573134 24.47813898-54.55731341 54.609474C613.61284103 434.18410704 638.08973846 458.71564937 668.17015566 458.71564937"
                p-id="4699"></path>
            <path
                d="M670.0702846 641.9291177l-2.97811119 0.96869368c-48.92150503 22.14706471-101.39736959 33.41619958-155.8441529 33.41619959-56.24383382 0-109.43752511-11.37842222-158.14293731-33.73785513l-2.94333827-0.90038818c-1.8305819-0.50173391-4.30696038-1.21831788-7.39436013-1.21831788-17.9096526 0-32.44626435 14.53661177-32.44626435 32.374233 0 8.46985808 3.98406209 16.97697458 10.55254967 23.36662537l-0.39492842 1.97216028 8.29102246 3.73319513c58.14644705 26.31120517 121.38847103 40.16600588 182.87194324 40.16600587 62.6334858 0 124.008911-13.49588673 183.23209877-40.48890417 10.40724545-5.70783971 16.9037017-16.65283474 16.90370169-28.53423241C711.77750665 652.12399616 692.86438745 634.92968721 670.0702846 641.9291177"
                p-id="4700"></path>
          </svg>
        </div>
        <div class="img-tool message-tool" :title="tips.systemMessageImgTip">
          <svg t="1671009980831" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
               p-id="4843">
            <path
                d="M1029.81530905 562.87535408V822.68918518c0 78.6432-63.75600947 142.39920947-142.39921069 142.39920948H136.58390164c-78.6432 0-142.39920947-63.75600947-142.39921069-142.39920948V201.31081482c0-78.6432 63.75600947-142.39920947 142.39921069-142.39920948h750.83219672c78.6432 0 142.39920947 63.75600947 142.39921069 142.39920948v361.56453926z m-77.6722963-90.56589749V201.31081482a64.72691317 64.72691317 0 0 0-64.72691439-64.72691318H136.58390164a64.72691317 64.72691317 0 0 0-64.72691439 64.72691318v418.07113481A352.06262875 352.06262875 0 0 1 123.63851852 615.56306132a348.16606815 348.16606815 0 0 1 222.45345659 79.91184832C408.87708089 531.88410785 566.50006164 421.38232059 745.01688889 421.38232059c79.74355794 0 154.12772622 20.36308741 207.12612386 50.927136z m0 99.80890074c-6.47269095-10.09739852-25.64480356-26.27912651-52.97250607-39.94945065C857.60288237 511.37862163 804.53975822 499.05461689 745.01688889 499.05461689c-147.78448949 0-278.07976653 92.55948683-328.204288 229.00382105-3.31401838 9.03587673-8.98409601 24.66095408-16.98434253 46.82344888-9.32067555 25.85192889-41.81358577 34.11108386-62.34496235 15.84514843-19.94883436-17.76106549-34.65478994-30.42164978-43.85895704-37.80051793A270.50671764 270.50671764 0 0 0 123.63851852 693.23535762c-17.55393897 0-34.86191525 1.65700859-51.78153127 4.91924624V822.68918518a64.72691317 64.72691317 0 0 0 64.72691439 64.72691318h750.83219672a64.72691317 64.72691317 0 0 0 64.72691439-64.72691318V572.10541155zM278.98311111 473.16385185a116.50844445 116.50844445 0 1 1 0-233.01688888 116.50844445 116.50844445 0 0 1 0 233.01688888z m0-77.6722963a38.83614815 38.83614815 0 1 0 0-77.6722963 38.83614815 38.83614815 0 0 0 0 77.6722963z"
                p-id="4844"></path>
          </svg>
        </div>
      </div>
      <div class="send-button" @click="sendSystemMessage">
        <span class="send-button-text">发送</span>
      </div>
    </div>
    <div class="system-message-input" contenteditable="true"></div>
  </div>
</template>

<script>
import $ from 'jquery';
import tips from '@/assets/js/tips';

export default {
  name: "SystemMessageInput",
  data() {
    return {
      tips,
    }
  },
  methods: {
    // 发送系统消息
    sendSystemMessage() {
      let systemMessageInput = $('.system-message-input');
      let systemMessage = systemMessageInput.html();
      if (systemMessage && systemMessage !== '') {
        systemMessageInput.html('');
        this.$bus.$emit('handleSystemMessage', systemMessage);
      } else {
        this.$bus.$emit('addWarningTip', '系统消息不能为空!', 'warning')
      }
    }
  },
  beforeDestroy() {
    $('.send-button').off('click');
  }
}
</script>

<style scoped>

.system-message-input-container {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 320px;
  transition: all 0.3s;
}

/*输入框*/
.system-message-input {
  width: 100%;
  height: 280px;
  padding: 10px;
  font-size: 14px;
  outline: none;
  overflow-y: auto;
}

/*输入框滚动条*/
.system-message-input::-webkit-scrollbar {
  width: 10px;
}

.system-message-input::-webkit-scrollbar-track {
  background-color: #939393;
  border-radius: 10px;
}

.system-message-input::-webkit-scrollbar-thumb {
  background-color: #6b6b6b;
  border-radius: 10px;
}

.system-message-input::-webkit-scrollbar-thumb:hover {
  background-color: #626262;
}

.system-message-input::-webkit-scrollbar-thumb:active {
  background-color: #525252;
}

/*工具集合*/
.message-input-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  height: 40px;
  background-color: transparent;
}

.message-tools {
  display: flex;
  align-items: center;
}

/*工具图标*/
.message-tools svg {
  width: 20px;
  height: 20px;
  vertical-align: -3px;
}

/*单个工具*/
.message-tool {
  margin-left: 15px;
  cursor: pointer;
}

.send-button {
  width: 50px;
  height: 26px;
  text-align: center;
  line-height: 26px;
  margin-right: 15px;
  border-radius: 4px;
  cursor: pointer;
}

</style>